{"ast":null,"code":"// Import modules and styles\nimport React,{useState}from\"react\";import axios from'axios';import'./review.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Review(_ref){let{albumId}=_ref;// State variables to manage form inputs and messages\nconst[reviewBody,setReviewBody]=useState('');const[score,setScore]=useState('');const[errorMessage,setErrorMessage]=useState('');// Function to submit review score and body\nasync function submitScore(e){e.preventDefault();try{// Send a POST request to submit review\nawait axios.post(\"http://localhost:3000/review\",{albumId,score,reviewBody}).then(res=>{// Handle response and display appropriate messages\nif(res.data===\"Invalid score!\"){setErrorMessage(res.data);}else if(res.data===\"Valid score!\"){window.location.reload();// Reload the page on successful submission\n}}).catch(e=>{setErrorMessage(\"Invalid score!\");// Set error message if request fails\nconsole.log(e);});}catch(e){console.log(e);}}return/*#__PURE__*/_jsx(\"div\",{className:\"review-container mb-3\",children:/*#__PURE__*/_jsx(\"form\",{action:\"POST\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"review-inputs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"review-item score\",children:[/*#__PURE__*/_jsx(\"textarea\",{id:\"review-score\",className:\"review-score\",maxLength:3,onChange:e=>{setScore(e.target.value);},placeholder:\"0-100\",rows:1,cols:5,wrap:\"soft\"}),/*#__PURE__*/_jsx(\"button\",{className:\"rate-button\",onClick:submitScore,children:\"RATE\"}),/*#__PURE__*/_jsx(\"p\",{className:\"review-error\",children:errorMessage})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"review-item revbody\",children:[/*#__PURE__*/_jsx(\"textarea\",{id:\"review-body\",className:\"review-body\",maxLength:5000,onChange:e=>{setReviewBody(e.target.value);},placeholder:\"Write your review (optional)\",cols:100,wrap:\"soft\"}),/*#__PURE__*/_jsx(\"button\",{className:\"rate-button review-button\",onClick:submitScore,children:\"SUBMIT REVIEW\"})]})]})})});}export default Review;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","Review","_ref","albumId","reviewBody","setReviewBody","score","setScore","errorMessage","setErrorMessage","submitScore","e","preventDefault","post","then","res","data","window","location","reload","catch","console","log","className","children","action","id","maxLength","onChange","target","value","placeholder","rows","cols","wrap","onClick"],"sources":["C:/Users/luker/SeniorProject/senior-music-project/frontend/src/Components/general/review.jsx"],"sourcesContent":["// Import modules and styles\r\nimport React, { useState } from \"react\";\r\nimport axios from 'axios';\r\nimport './review.css';\r\n\r\nfunction Review({ albumId }) {\r\n  // State variables to manage form inputs and messages\r\n  const [reviewBody, setReviewBody] = useState('');\r\n  const [score, setScore] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  // Function to submit review score and body\r\n  async function submitScore(e) {\r\n    e.preventDefault();\r\n    try {\r\n      // Send a POST request to submit review\r\n      await axios.post(\"http://localhost:3000/review\", {\r\n        albumId, score, reviewBody\r\n      })\r\n      .then(res => {\r\n        // Handle response and display appropriate messages\r\n        if (res.data === \"Invalid score!\") {\r\n          setErrorMessage(res.data);\r\n        } else if (res.data === \"Valid score!\") {\r\n          window.location.reload(); // Reload the page on successful submission\r\n        }\r\n      })\r\n      .catch(e => {\r\n        setErrorMessage(\"Invalid score!\"); // Set error message if request fails\r\n        console.log(e);\r\n      });\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  }\r\n  \r\n  return (\r\n    <div className=\"review-container mb-3\">\r\n      <form action=\"POST\">\r\n        <div className=\"review-inputs\">\r\n          {/* Input for entering review score */}\r\n          <div className=\"review-item score\">\r\n            <textarea\r\n              id=\"review-score\"\r\n              className=\"review-score\"\r\n              maxLength={3}\r\n              onChange={(e) => {\r\n                setScore(e.target.value);\r\n              }}\r\n              placeholder=\"0-100\"\r\n              rows={1}\r\n              cols={5}\r\n              wrap=\"soft\"\r\n            />\r\n            <button className='rate-button' onClick={submitScore}>RATE</button>\r\n            <p className='review-error'>{errorMessage}</p>\r\n          </div>\r\n          {/* Input for entering review body */}\r\n          <div className=\"review-item revbody\">\r\n            <textarea\r\n              id=\"review-body\"\r\n              className=\"review-body\"\r\n              maxLength={5000}\r\n              onChange={(e) => {\r\n                setReviewBody(e.target.value);\r\n              }}\r\n              placeholder=\"Write your review (optional)\"\r\n              cols={100}\r\n              wrap=\"soft\"\r\n            />\r\n            <button className='rate-button review-button' onClick={submitScore}>SUBMIT REVIEW</button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Review;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}