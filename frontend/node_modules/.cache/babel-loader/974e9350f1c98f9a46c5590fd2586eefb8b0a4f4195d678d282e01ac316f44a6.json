{"ast":null,"code":"// Import modules, components, styles\nimport React,{useState,useEffect}from\"react\";import{useParams,NavLink,Route,Switch,Link}from'react-router-dom';import{Container}from\"react-bootstrap\";import axios from\"axios\";import UserIcon from'../Assets/Icons/UserProfileIcon.png';import'./profile.css';import'./home.css';import{ColorExtractor}from'react-color-extractor';import chroma from'chroma-js';import CustomCardResult from\"./CustomCardResult.jsx\";import CustomTracklist from\"./CustomTracklist.jsx\";import Genres from\"./genres.json\";import Loading from\"./loading.jsx\";import NotFound from\"./not-found.jsx\";import UserReviewResults from\"./user-review-results.jsx\";import PlaylistTracklist from\"./PlaylistTracklist.jsx\";import{compareSync}from\"bcryptjs\";// Add spotify credentials\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const CLIENT_ID=\"5d8c84c59ac8435e91aa1c9d5d2e9706\";const CLIENT_SECRET=\"93799cce40b641bb951a9b6966e3f2c0\";function UserPage(){// Declare state variables\nconst{userId}=useParams();// Get the artistId from the URL\nconst[userResults,setUserResults]=useState([]);const[token,setToken]=useState(null);const[loading,setLoading]=useState(true);const[extractedColors,setExtractedColors]=useState([]);const[userAuth,setUserAuth]=useState(false);const[gradientString,setGradientString]=useState('');const[bodyGradient,setBodyGradient]=useState('');const[activeTab,setActiveTab]=useState('Overview');const[activeStatTab,setActiveStatTab]=useState('all-time');const[followState,setFollowState]=useState('');const[topArtistsMonth,setTopArtistsMonth]=useState([]);const[topArtistsTotal,setTopArtistsTotal]=useState([]);const[topTracksMonth,setTopTracksMonth]=useState([]);const[topTracksTotal,setTopTracksTotal]=useState([]);const[topPlaylists,setTopPlaylists]=useState([]);const[listenHistory,setListenHistory]=useState([]);const[userSession,setUserSession]=useState([]);const[spotifyUserPage,setSpotifyUserPage]=useState([]);const[reccomended,setReccomended]=useState([]);const[followingVal,setFollowingVal]=useState([]);const[followingResults,setFollowingResults]=useState([]);const[followersVal,setFollowersVal]=useState([]);const[followerResults,setFollowerResults]=useState([]);const[userReviews,setUserReviews]=useState([]);// Function to refresh the access token using the refresh token\nasync function refreshAccessToken(refreshToken){const clientId=CLIENT_ID;const clientSecret=CLIENT_SECRET;const base64Encoded=btoa(\"\".concat(clientId,\":\").concat(clientSecret)).toString('base64');const url='https://accounts.spotify.com/api/token';const body=new URLSearchParams();body.append('grant_type','refresh_token');body.append('refresh_token',refreshToken);try{const response=await fetch(url,{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded','Authorization':\"Basic \".concat(base64Encoded)},body:body});if(response.ok){const data=await response.json();const newAccessToken=data.access_token;// Use the new access token for Spotify API requests\nreturn newAccessToken;}else{// Handle error when refreshing token\nconsole.error('Error refreshing access token:',response.statusText);return null;}}catch(error){console.error('Error refreshing access token:',error);return null;}}// Starts the initialization of spotify account linking by redirecting\n// Authorized user to the spotify authorize endpoint\nconst handleSpotifyLogin=()=>{console.log('handleSpotifyLogin function called.');const authEndpoint='https://accounts.spotify.com/authorize';const clientId='5d8c84c59ac8435e91aa1c9d5d2e9706';const redirectUri='http://localhost:3000/';const scopes=['user-top-read','user-read-recently-played'];const queryParams=new URLSearchParams({client_id:clientId,redirect_uri:redirectUri,scope:scopes.join(' '),response_type:'code',show_dialog:'true',access_type:'offline'});const authUrl=\"\".concat(authEndpoint,\"?\").concat(queryParams.toString());window.location.href=authUrl;};// Function for following/unfollowing a user\nconst handleFollow=async()=>{console.log('hello follow');try{const userResults=await axios.post(\"http://localhost:3000/change-follower\",{id:userId,type:'user'});console.log('userResults: ',userResults.data);if(userResults.data===\"Follow\"||userResults.data===\"Unfollow\"){window.location.reload();}}catch(error){console.error(error);}};// Function for delinking your spotify account to the user account\nconst handleSpotifyLogout=async()=>{try{const logoutResults=await axios.get(\"http://localhost:3000/spotify-logout\");if(logoutResults.data===\"logout\"){window.location.reload();}}catch(error){console.error(error);}};// Function to handle tab click and set the active tab\nconst handleTabClick=tabName=>{setActiveTab(tabName);};const handleStatClick=tabName=>{setActiveStatTab(tabName);};// handles color background on profile page\nconst handleGetColors=colors=>{// Store the extracted colors in state\nsetExtractedColors(colors[2]);const startColor=colors[2];const darkerColor=darkenColor(startColor,0.5);// Darken the color \nconst gradient=\"linear-gradient(to bottom, \".concat(startColor,\", \").concat(darkerColor,\")\");setGradientString(gradient);const bodyDark=darkenColor(startColor,0.6);const bodyGradient=\"linear-gradient(to bottom, \".concat(bodyDark,\" , #201d24,#201d24, #201d24 )\");setBodyGradient(bodyGradient);};const darkenColor=(color,amount)=>{// Remove the \"#\" symbol from the color string and split it into RGB components\nconst[r,g,b]=color.substring(1).match(/.{2}/g).map(value=>parseInt(value,16));// Calculate a darker shade by reducing RGB values\nconst darkerR=Math.round(r*(1-amount));const darkerG=Math.round(g*(1-amount));const darkerB=Math.round(b*(1-amount));// Construct a new color string in hexadecimal format\nreturn\"#\".concat(darkerR.toString(16).padStart(2,'0')).concat(darkerG.toString(16).padStart(2,'0')).concat(darkerB.toString(16).padStart(2,'0'));};useEffect(()=>{// Sets all the state variables and fetches all info for relating to user\nasync function fetchData(){// Fetch access token once during component initialization\nsetLoading(true);setActiveStatTab('all-time');setActiveTab('Overview');// Make an API call to fetch user data from the backend\naxios.get(\"http://localhost:3000/session\").then(response=>{// Handle successful response\nsetUserSession(response.data);// Assuming the response contains user data\n}).catch(error=>{// Handle error\nsetUserSession([]);console.error(\"Error fetching user data:\",error);});const followingData=await axios.post(\"http://localhost:3000/show-following\",{id:userId}).then(response=>response.data).catch(e=>{console.log(e);return[];});// Fetch data for followers\nconst followersData=await axios.post(\"http://localhost:3000/show-followers\",{id:userId,type:'user'}).then(response=>response.data).catch(e=>{console.log(e);return[];});// Update followingVal and followersVal state variables\nsetFollowingVal(followingData);setFollowersVal(followersData);console.log(\"followingData\",followingData);const fetchFollowingResults=async()=>{if(followingData.followingList){const userResultsPromises=followingData.followingList.map(async user=>{console.log(\"USER LOOP: \",user);try{const response=await axios.post(\"http://localhost:3000/user\",{id:user.entity_id});console.log(\"Axios response for user\",user.entity_id,\":\",response.data);return response.data;}catch(error){console.error(\"Error fetching data for user\",user.entity_id,\":\",error);return null;}});const userResults=await Promise.all(userResultsPromises);console.log(\"All User Results:\",userResults);const filteredResults=userResults.filter(result=>result!==null);console.log(\"Filtered User Results:\",filteredResults);return filteredResults;}};const followingsData=await fetchFollowingResults();console.log(followingsData);setFollowingResults(followingsData);console.log(followingResults);const fetchFollowerResults=async()=>{let followersResults=[];console.log(followersData);if(followersData.followerIds){const followersPromises=followersData.followerIds.map(async follower=>{console.log(\"FOLLOWER LOOP: \",follower);try{const response=await axios.post(\"http://localhost:3000/user\",{id:follower});console.log(\"Axios response for follower\",follower,\":\",response.data);return response.data;}catch(error){console.error(\"Error fetching data for follower\");return null;}});followersResults=await Promise.all(followersPromises);console.log(\"All Followers Results:\",followersResults);followersResults=followersResults.filter(result=>result!==null);console.log(\"Filtered Followers Results:\",followersResults);}return followersResults;};const followerData=await fetchFollowerResults();console.log(followerData);setFollowerResults(followerData);console.log(followingResults);performSearch();}fetchData();},[userId]);useEffect(()=>{},[followingVal]);// Search for user information such as reviews, stats and followers\nasync function performSearch(){const userResults=await axios.post(\"http://localhost:3000/user\",{id:userId}).then(response=>response.data).catch(e=>{console.log(e);return[];});if(userResults){setUserResults(userResults);}else{setUserResults([]);}const userAuth=await axios.post(\"http://localhost:3000/user-authenticate\",{id:userId}).then(response=>response.data).catch(e=>{console.log(e);return false;});const userToken=await axios.post(\"http://localhost:3000/user-token\",{id:userId}).then(response=>response.data).catch(e=>{console.log(e);return false;});const userReviews=await axios.post(\"http://localhost:3000/user-reviews\",{id:userId}).then(response=>response.data).catch(e=>{console.log(e);return[];});setUserReviews(userReviews);const followState=await axios.post(\"http://localhost:3000/follow-status\",{id:userId,type:'user'}).then(response=>response.data).catch(e=>{console.log(e);return[];});setFollowState(followState);console.log(\"FOLLOW STATE: \",followState);setUserAuth(userAuth);console.log(\"TOKEN: \",userToken);const refreshedAccessToken=await refreshAccessToken(userToken);setToken(refreshedAccessToken);const getTopStats=async(type,timeRange)=>{try{const token=refreshedAccessToken;const response=await fetch(\"https://api.spotify.com/v1/me/top/\".concat(type,\"?time_range=\").concat(timeRange),{method:'GET',headers:{Authorization:\"Bearer \".concat(token)// Use the access token obtained earlier\n}});console.log(\"RESPONSE: \",response);if(response.ok){const data=await response.json();return data;// Process the response data as needed or set it in state\n}else{console.log('error getting top artists');}}catch(e){console.log(e);// Handle errors appropriately\n}};const getUserSpotifyData=async endpoint=>{try{const token=refreshedAccessToken;// Replace with your access token\nconst response=await fetch(endpoint,{method:'GET',headers:{Authorization:\"Bearer \".concat(token)// Use the access token obtained earlier\n}});if(response.ok){const data=await response.json();return data;// Process the response data as needed or set it in state\n}else{console.log('error getting top artists');}}catch(e){console.log(e);// Handle errors appropriately\n}};setSpotifyUserPage(await getUserSpotifyData(\"https://api.spotify.com/v1/me/\"));setTopArtistsMonth(await getTopStats(\"artists\",\"short_term\"));setTopTracksMonth(await getTopStats(\"tracks\",\"short_term\"));setTopArtistsTotal(await getTopStats(\"artists\",\"long_term\"));setTopTracksTotal(await getTopStats(\"tracks\",\"long_term\"));setTopPlaylists(await getUserSpotifyData(\"https://api.spotify.com/v1/me/playlists\"));setListenHistory(await getUserSpotifyData(\"https://api.spotify.com/v1/me/player/recently-played\"));if(userToken){const[topArtistsIds]=await Promise.all([getTopStats(\"artists\",\"long_term\")]);console.log(\"CHECK ID: \",topArtistsIds);// Construct the seeds for the recommendations API query\nconst extractIds=data=>{if(Array.isArray(data)){return data.map(item=>item.id);}else{// Return an empty array or handle the case when data is not an array\nreturn[];}};const extractedArtistIds=extractIds(topArtistsIds.items.slice(0,4));console.log(\"EXTRACTED ARTISTS: \",extractedArtistIds);const seedArtists=\"seed_artists=\".concat(extractedArtistIds.join(','));const recommendationsURL=\"https://api.spotify.com/v1/recommendations?\".concat(seedArtists);console.log(recommendationsURL);setReccomended(await getUserSpotifyData(recommendationsURL));}else{setReccomended([]);}setLoading(false);// Set loading to false when data is loaded\n}return/*#__PURE__*/_jsx(\"div\",{className:\"page-body\",children:loading?/*#__PURE__*/_jsx(Loading,{}):userResults.length===0?/*#__PURE__*/_jsx(NotFound,{}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ColorExtractor,{src:UserIcon,getColors:handleGetColors}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-head\",style:{background:gradientString},children:[/*#__PURE__*/_jsx(\"div\",{className:\"column-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"artist-image-container\",children:/*#__PURE__*/_jsx(\"img\",{src:UserIcon,className:\"artist-image profile-image mb-3\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"column-right\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-name\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"profile-caption\",children:userResults.username})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h1\",{className:\"caption type-caption\",children:[\" \",userResults.accountname,\" \"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"genre-list\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"artist-link\",children:[\"User \\u2022 \",followersVal.followerIds?followersVal.followerIds.length:0,\" Followers \\u2022 \",followingVal&&followingVal.followingList?followingVal.followingList.length:0,\" Following\"]})}),userAuth===true&&!token&&/*#__PURE__*/_jsx(\"button\",{className:\"rate-button\",id:\"loginButton\",onClick:handleSpotifyLogin,children:\"Authorize Spotify\"}),userAuth===true&&token&&/*#__PURE__*/_jsx(\"button\",{className:\"rate-button\",id:\"loginButton\",onClick:handleSpotifyLogout,children:\"Delink Spotify\"}),userAuth!==true&&userSession._id&&/*#__PURE__*/_jsx(\"button\",{className:\"rate-button\",id:\"loginButton\",onClick:handleFollow,children:followState}),token&&/*#__PURE__*/_jsx(Link,{to:spotifyUserPage.external_urls.spotify,children:/*#__PURE__*/_jsx(\"button\",{className:\"rate-button\",id:\"loginButton\",children:\"Open on Spotify\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-body\",style:{background:bodyGradient},children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-body-expand\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top-songs top-tabs pb-3 pt-3\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"top-tab caption profile-subcaption pb-3 \".concat(activeTab==='Overview'?'active-profile':''),onClick:()=>handleTabClick('Overview'),children:\"Overview\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"top-tab caption profile-subcaption pb-3 \".concat(activeTab==='Following'?'active-profile':''),onClick:()=>handleTabClick('Following'),children:\"Following\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"top-tab caption profile-subcaption pb-3 \".concat(activeTab==='Followers'?'active-profile':''),onClick:()=>handleTabClick('Followers'),children:\"Followers\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"top-tab caption profile-subcaption pb-3 \".concat(activeTab==='Review'?'active-profile':''),onClick:()=>handleTabClick('Review'),children:\"Reviews\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"top-tab caption profile-subcaption pb-3 \".concat(activeTab==='Stats'?'active-profile':''),onClick:()=>handleTabClick('Stats'),children:\"Stats\"})]}),activeTab==='Overview'&&/*#__PURE__*/ // Content related to Overview tab\n_jsxs(\"div\",{className:\"content-overview\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"Milestones\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{className:\"artist-link\",children:[followingVal.length>=5?\"Completed: \":\"Incomplete: \",\"Follow 5 or more users on this website\"]}),/*#__PURE__*/_jsxs(\"li\",{className:\"artist-link\",children:[followersVal.length>=5?\"Completed: \":\"Incomplete: \",\"Have 5 or more users follow you on this website\"]}),/*#__PURE__*/_jsxs(\"li\",{className:\"artist-link\",children:[userReviews.length>=5?\"Completed: \":\"Incomplete: \",\"Review 5 or more albums\"]})]})]}),listenHistory&&listenHistory.items&&listenHistory.items.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"Listening activity\"}),/*#__PURE__*/_jsx(PlaylistTracklist,{items:listenHistory.items})]}),(!listenHistory||!listenHistory.items||listenHistory.items.length===0)&&/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"No listening activity available\"}),topPlaylists&&topPlaylists.items&&topPlaylists.items.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"User playlists\"}),/*#__PURE__*/_jsx(CustomCardResult,{items:topPlaylists.items,subtitleType:\"playlist\"})]}),(!topPlaylists||!topPlaylists.items||topPlaylists.items.length===0)&&/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"No user playlists available\"}),reccomended&&reccomended.tracks&&reccomended.tracks.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"User reccomended\"}),/*#__PURE__*/_jsx(CustomTracklist,{items:reccomended.tracks})]}),(!reccomended||!reccomended.tracks||reccomended.tracks.length===0)&&/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"No user recommendations available\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\"})]}),activeTab==='Review'&&/*#__PURE__*/ // Content related to Reviews tab\n_jsx(\"div\",{className:\"content-overview\",children:userReviews.length===0?/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"No user reviews available.\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"User reviews\"})}),/*#__PURE__*/_jsx(UserReviewResults,{reviews:userReviews})]})}),activeTab==='Following'&&/*#__PURE__*/ // Content related to Reviews tab\n_jsx(\"div\",{className:\"content-overview\",children:!followingVal.followingList?/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"No following stats available.\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"Following\"})}),/*#__PURE__*/_jsx(CustomCardResult,{items:followingResults,subtitleType:\"user\"})]})}),activeTab==='Followers'&&/*#__PURE__*/ // Content related to Reviews tab\n_jsx(\"div\",{className:\"content-overview\",children:followersVal.length===0?/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"No followers available.\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"Followers\"})}),\" \",/*#__PURE__*/_jsx(CustomCardResult,{items:followerResults,subtitleType:\"user\"}),\"  \"]})}),activeTab==='Stats'&&/*#__PURE__*/ // Content related to Stats tab\n_jsxs(\"div\",{className:\"content-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top-songs top-tabs pb-3 pt-3\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"top-tab caption profile-subcaption pb-3 \".concat(activeStatTab==='all-time'?'active-profile':''),onClick:()=>handleStatClick('all-time'),children:\"All time\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"top-tab caption profile-subcaption pb-3 \".concat(activeStatTab==='past-month'?'active-profile':''),onClick:()=>handleStatClick('past-month'),children:\"Past month\"})]}),activeStatTab==='all-time'&&/*#__PURE__*/_jsxs(\"div\",{children:[topArtistsTotal&&topArtistsTotal.items.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"Top artists\"}),/*#__PURE__*/_jsx(CustomCardResult,{items:topArtistsTotal.items,subtitleType:\"artist\"})]}):/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"No data available for all-time top artists.\"}),/*#__PURE__*/_jsx(\"div\",{children:topTracksTotal&&topTracksTotal.items.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"Top tracks\"}),/*#__PURE__*/_jsx(CustomTracklist,{items:topTracksTotal.items,subtitleType:\"song\"})]}):/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"No data available for all-time top tracks.\"})})]}),activeStatTab==='past-month'&&/*#__PURE__*/_jsxs(\"div\",{children:[topArtistsMonth&&topArtistsMonth.items.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"Top artists\"}),/*#__PURE__*/_jsx(CustomCardResult,{items:topArtistsMonth.items,subtitleType:\"artist\"})]}):/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"No data available for past-month top artists.\"}),/*#__PURE__*/_jsx(\"div\",{children:topTracksMonth&&topTracksMonth.items.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"Top tracks\"}),/*#__PURE__*/_jsx(CustomTracklist,{items:topTracksMonth.items,subtitleType:\"song\"})]}):/*#__PURE__*/_jsx(\"h1\",{className:\"caption profile-altsubcaption pb-3 pt-3\",children:\"No data available for past-month top tracks.\"})})]})]})]})})]})});}export default UserPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","NavLink","Route","Switch","Link","Container","axios","UserIcon","ColorExtractor","chroma","CustomCardResult","CustomTracklist","Genres","Loading","NotFound","UserReviewResults","PlaylistTracklist","compareSync","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CLIENT_ID","CLIENT_SECRET","UserPage","userId","userResults","setUserResults","token","setToken","loading","setLoading","extractedColors","setExtractedColors","userAuth","setUserAuth","gradientString","setGradientString","bodyGradient","setBodyGradient","activeTab","setActiveTab","activeStatTab","setActiveStatTab","followState","setFollowState","topArtistsMonth","setTopArtistsMonth","topArtistsTotal","setTopArtistsTotal","topTracksMonth","setTopTracksMonth","topTracksTotal","setTopTracksTotal","topPlaylists","setTopPlaylists","listenHistory","setListenHistory","userSession","setUserSession","spotifyUserPage","setSpotifyUserPage","reccomended","setReccomended","followingVal","setFollowingVal","followingResults","setFollowingResults","followersVal","setFollowersVal","followerResults","setFollowerResults","userReviews","setUserReviews","refreshAccessToken","refreshToken","clientId","clientSecret","base64Encoded","btoa","concat","toString","url","body","URLSearchParams","append","response","fetch","method","headers","ok","data","json","newAccessToken","access_token","console","error","statusText","handleSpotifyLogin","log","authEndpoint","redirectUri","scopes","queryParams","client_id","redirect_uri","scope","join","response_type","show_dialog","access_type","authUrl","window","location","href","handleFollow","post","id","type","reload","handleSpotifyLogout","logoutResults","get","handleTabClick","tabName","handleStatClick","handleGetColors","colors","startColor","darkerColor","darkenColor","gradient","bodyDark","color","amount","r","g","b","substring","match","map","value","parseInt","darkerR","Math","round","darkerG","darkerB","padStart","fetchData","then","catch","followingData","e","followersData","fetchFollowingResults","followingList","userResultsPromises","user","entity_id","Promise","all","filteredResults","filter","result","followingsData","fetchFollowerResults","followersResults","followerIds","followersPromises","follower","followerData","performSearch","userToken","refreshedAccessToken","getTopStats","timeRange","Authorization","getUserSpotifyData","endpoint","topArtistsIds","extractIds","Array","isArray","item","extractedArtistIds","items","slice","seedArtists","recommendationsURL","className","children","length","src","getColors","style","background","username","accountname","onClick","_id","to","external_urls","spotify","subtitleType","tracks","reviews"],"sources":["C:/Users/luker/SeniorProject/senior-music-project/frontend/src/Components/general/user-page.jsx"],"sourcesContent":["// Import modules, components, styles\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useParams, NavLink, Route, Switch , Link} from 'react-router-dom';\r\nimport { Container } from \"react-bootstrap\";\r\nimport axios from \"axios\"\r\nimport UserIcon from '../Assets/Icons/UserProfileIcon.png';\r\nimport './profile.css'\r\nimport './home.css'\r\nimport { ColorExtractor  } from 'react-color-extractor';\r\nimport chroma from 'chroma-js';\r\nimport CustomCardResult from \"./CustomCardResult.jsx\";\r\nimport CustomTracklist from \"./CustomTracklist.jsx\"\r\nimport Genres from \"./genres.json\";\r\nimport Loading from \"./loading.jsx\"\r\nimport NotFound from \"./not-found.jsx\"\r\nimport UserReviewResults from \"./user-review-results.jsx\"\r\nimport PlaylistTracklist from \"./PlaylistTracklist.jsx\";\r\nimport { compareSync } from \"bcryptjs\";\r\n\r\n\r\n\r\n// Add spotify credentials\r\nconst CLIENT_ID = \"5d8c84c59ac8435e91aa1c9d5d2e9706\";\r\nconst CLIENT_SECRET = \"93799cce40b641bb951a9b6966e3f2c0\";\r\n\r\nfunction UserPage() {\r\n\r\n    // Declare state variables\r\n    const { userId } = useParams(); // Get the artistId from the URL\r\n    const [userResults, setUserResults] = useState([]);\r\n    const [token, setToken] = useState(null)\r\n    const [loading, setLoading] = useState(true);\r\n    const [extractedColors, setExtractedColors] = useState([]);\r\n    const [userAuth, setUserAuth] = useState(false)\r\n    const [gradientString, setGradientString] = useState('');\r\n    const [bodyGradient, setBodyGradient] = useState('');\r\n    const [activeTab, setActiveTab] = useState('Overview');\r\n    const [activeStatTab, setActiveStatTab] = useState('all-time')\r\n    const [followState, setFollowState] = useState('');\r\n    const [topArtistsMonth, setTopArtistsMonth] = useState([]);\r\n    const [topArtistsTotal, setTopArtistsTotal] = useState([]);\r\n    const [topTracksMonth, setTopTracksMonth] = useState([]);\r\n    const [topTracksTotal, setTopTracksTotal] = useState([]);\r\n    const [topPlaylists, setTopPlaylists] = useState([])\r\n    const [listenHistory, setListenHistory] = useState([]);\r\n    const [userSession, setUserSession] = useState([])\r\n    const [spotifyUserPage, setSpotifyUserPage] = useState([]);\r\n    const [reccomended, setReccomended] = useState([]);\r\n    const [followingVal, setFollowingVal] = useState([]);\r\n    const [followingResults, setFollowingResults] = useState([]);\r\n    const [followersVal, setFollowersVal] = useState([]);\r\n    const [followerResults, setFollowerResults] = useState([]);\r\n    const [userReviews, setUserReviews] = useState([]);\r\n\r\n    // Function to refresh the access token using the refresh token\r\n    async function refreshAccessToken(refreshToken) {\r\n        const clientId = CLIENT_ID;\r\n        const clientSecret = CLIENT_SECRET;\r\n        const base64Encoded = btoa(`${clientId}:${clientSecret}`).toString('base64');\r\n    \r\n        const url = 'https://accounts.spotify.com/api/token';\r\n        const body = new URLSearchParams();\r\n        body.append('grant_type', 'refresh_token');\r\n        body.append('refresh_token', refreshToken);\r\n    \r\n        try {\r\n        const response = await fetch(url, {\r\n            method: 'POST',\r\n            headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded',\r\n            'Authorization': `Basic ${base64Encoded}`\r\n            },\r\n            body: body\r\n        });\r\n    \r\n        if (response.ok) {\r\n            const data = await response.json();\r\n            const newAccessToken = data.access_token;\r\n            // Use the new access token for Spotify API requests\r\n            return newAccessToken;\r\n        } else {\r\n            // Handle error when refreshing token\r\n            console.error('Error refreshing access token:', response.statusText);\r\n            return null;\r\n        }\r\n        } catch (error) {\r\n        console.error('Error refreshing access token:', error);\r\n        return null;\r\n        }\r\n    }\r\n  \r\n    // Starts the initialization of spotify account linking by redirecting\r\n    // Authorized user to the spotify authorize endpoint\r\n    const handleSpotifyLogin = () => {\r\n        console.log('handleSpotifyLogin function called.');\r\n        const authEndpoint = 'https://accounts.spotify.com/authorize';\r\n        const clientId = '5d8c84c59ac8435e91aa1c9d5d2e9706';\r\n        const redirectUri = 'http://localhost:3000/';\r\n        const scopes = ['user-top-read', 'user-read-recently-played'];\r\n    \r\n        const queryParams = new URLSearchParams({\r\n            client_id: clientId,\r\n            redirect_uri: redirectUri,\r\n            scope: scopes.join(' '),\r\n            response_type: 'code',\r\n            show_dialog: 'true',\r\n            access_type: 'offline'\r\n        });\r\n    \r\n        const authUrl = `${authEndpoint}?${queryParams.toString()}`;\r\n        \r\n        window.location.href = authUrl;\r\n    };\r\n    \r\n    // Function for following/unfollowing a user\r\n    const handleFollow = async () => {\r\n        console.log('hello follow');\r\n        try {\r\n            const userResults = await axios.post(\"http://localhost:3000/change-follower\", {id: userId, type: 'user'});\r\n            console.log('userResults: ', userResults.data);\r\n    \r\n            if (userResults.data === \"Follow\" || userResults.data === \"Unfollow\") {\r\n                window.location.reload();\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    // Function for delinking your spotify account to the user account\r\n    const handleSpotifyLogout = async () => {\r\n        try {\r\n            const logoutResults = await axios.get(\"http://localhost:3000/spotify-logout\");\r\n          \r\n    \r\n            if (logoutResults.data === \"logout\") {\r\n                window.location.reload();\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n   \r\n\r\n    // Function to handle tab click and set the active tab\r\n    const handleTabClick = (tabName) => {\r\n        setActiveTab(tabName);\r\n    };\r\n\r\n    const handleStatClick = (tabName) => {\r\n        setActiveStatTab(tabName);\r\n    }\r\n\r\n    // handles color background on profile page\r\n    const handleGetColors = (colors) => {\r\n        // Store the extracted colors in state\r\n        setExtractedColors(colors[2]);\r\n        const startColor = colors[2];\r\n        const darkerColor = darkenColor(startColor, 0.5); // Darken the color \r\n        const gradient = `linear-gradient(to bottom, ${startColor}, ${darkerColor})`;\r\n        setGradientString(gradient);\r\n        const bodyDark = darkenColor(startColor, 0.6);\r\n        const bodyGradient = `linear-gradient(to bottom, ${bodyDark} , #201d24,#201d24, #201d24 )`\r\n        setBodyGradient(bodyGradient)\r\n    };\r\n\r\n    const darkenColor = (color, amount) => {\r\n        // Remove the \"#\" symbol from the color string and split it into RGB components\r\n        const [r, g, b] = color.substring(1).match(/.{2}/g).map((value) => parseInt(value, 16));\r\n    \r\n        // Calculate a darker shade by reducing RGB values\r\n        const darkerR = Math.round(r * (1 - amount));\r\n        const darkerG = Math.round(g * (1 - amount));\r\n        const darkerB = Math.round(b * (1 - amount));\r\n    \r\n        // Construct a new color string in hexadecimal format\r\n        return `#${darkerR.toString(16).padStart(2, '0')}${darkerG.toString(16).padStart(2, '0')}${darkerB.toString(16).padStart(2, '0')}`;\r\n      };\r\n    \r\n    useEffect(() => {\r\n        // Sets all the state variables and fetches all info for relating to user\r\n        async function fetchData() {\r\n            // Fetch access token once during component initialization\r\n            setLoading(true);\r\n\r\n            setActiveStatTab('all-time')\r\n            setActiveTab('Overview');\r\n\r\n\r\n            // Make an API call to fetch user data from the backend\r\n            axios.get(\"http://localhost:3000/session\")\r\n                .then(response => {\r\n                // Handle successful response\r\n                setUserSession(response.data); // Assuming the response contains user data\r\n                })\r\n                .catch(error => {\r\n                // Handle error\r\n                setUserSession([]);\r\n                console.error(\"Error fetching user data:\", error);\r\n            });\r\n\r\n\r\n            const followingData = await axios.post(\"http://localhost:3000/show-following\", { id: userId })\r\n                    .then(response => response.data)\r\n                    .catch(e => {\r\n                        console.log(e);\r\n                        return [];\r\n                    });\r\n        \r\n            // Fetch data for followers\r\n            const followersData = await axios.post(\"http://localhost:3000/show-followers\", { id: userId, type: 'user' })\r\n                .then(response => response.data)\r\n                .catch(e => {\r\n                    console.log(e);\r\n                    return [];\r\n                });\r\n        \r\n            // Update followingVal and followersVal state variables\r\n            setFollowingVal(followingData);\r\n            setFollowersVal(followersData);\r\n\r\n            console.log(\"followingData\", followingData);\r\n\r\n            const fetchFollowingResults = async () => {\r\n                \r\n                if (followingData.followingList) {\r\n\r\n                    const userResultsPromises = followingData.followingList.map(async (user) => {\r\n                        console.log(\"USER LOOP: \", user);\r\n                        try {\r\n                            const response = await axios.post(\"http://localhost:3000/user\", { id: user.entity_id });\r\n                            console.log(\"Axios response for user\", user.entity_id, \":\", response.data);\r\n                            return response.data;\r\n                        } catch (error) {\r\n                            console.error(\"Error fetching data for user\", user.entity_id, \":\", error);\r\n                            return null;\r\n                        }\r\n                    });\r\n                \r\n                    const userResults = await Promise.all(userResultsPromises);\r\n                    console.log(\"All User Results:\", userResults);\r\n                    const filteredResults = userResults.filter(result => result !== null);\r\n                    console.log(\"Filtered User Results:\", filteredResults);\r\n                    return filteredResults;\r\n\r\n                }\r\n                \r\n            };\r\n\r\n\r\n            const followingsData = await fetchFollowingResults();\r\n            console.log(followingsData)\r\n            setFollowingResults(followingsData);\r\n            console.log(followingResults);\r\n\r\n\r\n            const fetchFollowerResults = async () => {\r\n                let followersResults = [];\r\n\r\n                console.log(followersData);\r\n            \r\n                if (followersData.followerIds) {\r\n                    const followersPromises = followersData.followerIds.map(async (follower) => {\r\n                        console.log(\"FOLLOWER LOOP: \", follower);\r\n                        try {\r\n                            const response = await axios.post(\"http://localhost:3000/user\", { id: follower});\r\n                            console.log(\"Axios response for follower\", follower, \":\", response.data);\r\n                            return response.data;\r\n                        } catch (error) {\r\n                            console.error(\"Error fetching data for follower\");\r\n                            return null;\r\n                        }\r\n                    });\r\n            \r\n                    followersResults = await Promise.all(followersPromises);\r\n                    console.log(\"All Followers Results:\", followersResults);\r\n                    followersResults = followersResults.filter(result => result !== null);\r\n                    console.log(\"Filtered Followers Results:\", followersResults);\r\n                }\r\n            \r\n                return followersResults;\r\n            };\r\n\r\n            const followerData = await fetchFollowerResults();\r\n            console.log(followerData)\r\n            setFollowerResults(followerData);\r\n            console.log(followingResults);  \r\n            \r\n            performSearch()\r\n            \r\n          \r\n        }\r\n\r\n        fetchData();\r\n    }, [userId]); \r\n\r\n    useEffect(() => {\r\n        \r\n        \r\n    }, [followingVal]);\r\n\r\n    // Search for user information such as reviews, stats and followers\r\n\r\n    async function performSearch() {\r\n\r\n        const userResults = await axios.post(\"http://localhost:3000/user\", {id: userId})\r\n            .then(response => response.data)\r\n            .catch(e=> {\r\n                console.log(e);\r\n                return []\r\n            })\r\n\r\n        \r\n\r\n        if (userResults) {\r\n            setUserResults(userResults);\r\n        } else {\r\n            setUserResults([]);\r\n        }\r\n        const userAuth = await axios.post(\"http://localhost:3000/user-authenticate\", {id: userId})\r\n            .then(response => response.data)\r\n            .catch(e=> {\r\n                console.log(e);\r\n                return false;\r\n        })\r\n\r\n        const userToken = await axios.post(\"http://localhost:3000/user-token\", {id: userId})\r\n            .then(response => response.data)\r\n            .catch(e=> {\r\n                console.log(e);\r\n                return false;\r\n        })\r\n\r\n        \r\n\r\n        const userReviews = await axios.post(\"http://localhost:3000/user-reviews\", {id: userId})\r\n            .then(response => response.data)\r\n            .catch(e=> {\r\n                console.log(e);\r\n                return [];\r\n        })\r\n\r\n        \r\n\r\n        setUserReviews(userReviews);\r\n\r\n\r\n        const followState = await axios.post(\"http://localhost:3000/follow-status\", {id: userId, type: 'user'})\r\n            .then(response => response.data)\r\n            .catch(e=> {\r\n                console.log(e);\r\n                return [];\r\n        })\r\n\r\n        setFollowState(followState);\r\n        console.log(\"FOLLOW STATE: \", followState);\r\n        setUserAuth(userAuth);\r\n\r\n        console.log(\"TOKEN: \", userToken);\r\n\r\n    \r\n        const refreshedAccessToken = await refreshAccessToken(userToken);\r\n        \r\n        setToken(refreshedAccessToken);\r\n\r\n        const getTopStats = async (type, timeRange) => {\r\n            try {\r\n                const token = refreshedAccessToken;\r\n                \r\n                const response = await fetch(`https://api.spotify.com/v1/me/top/${type}?time_range=${timeRange}`, {\r\n                    method: 'GET',\r\n                    headers: {\r\n                        Authorization: `Bearer ${token}` // Use the access token obtained earlier\r\n                    }\r\n                });\r\n\r\n                console.log(\"RESPONSE: \", response);\r\n    \r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    return data;\r\n                    // Process the response data as needed or set it in state\r\n                } else {\r\n                    console.log('error getting top artists')\r\n                }\r\n            } catch (e) {\r\n                console.log(e);\r\n                // Handle errors appropriately\r\n            }\r\n        };\r\n\r\n\r\n\r\n        const getUserSpotifyData = async (endpoint) => {\r\n            try {\r\n                const token = refreshedAccessToken; // Replace with your access token\r\n                const response = await fetch(endpoint, {\r\n                    method: 'GET',\r\n                    headers: {\r\n                        Authorization: `Bearer ${token}` // Use the access token obtained earlier\r\n                    }\r\n                });\r\n    \r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    return data;\r\n                    // Process the response data as needed or set it in state\r\n                } else {\r\n                    console.log('error getting top artists')\r\n                }\r\n            } catch (e) {\r\n                console.log(e);\r\n                // Handle errors appropriately\r\n            }\r\n        };\r\n\r\n        \r\n\r\n\r\n        setSpotifyUserPage(await getUserSpotifyData(`https://api.spotify.com/v1/me/`))\r\n        setTopArtistsMonth(await getTopStats(\"artists\", \"short_term\") );\r\n        setTopTracksMonth(await getTopStats(\"tracks\", \"short_term\") );\r\n        setTopArtistsTotal(await getTopStats(\"artists\", \"long_term\") );\r\n        setTopTracksTotal(await getTopStats(\"tracks\", \"long_term\") );\r\n        setTopPlaylists(await getUserSpotifyData(`https://api.spotify.com/v1/me/playlists`));\r\n        setListenHistory(await getUserSpotifyData(`https://api.spotify.com/v1/me/player/recently-played`));\r\n\r\n        if (userToken) {\r\n\r\n            const [topArtistsIds] = await Promise.all([\r\n                getTopStats(\"artists\", \"long_term\"),\r\n               \r\n              ]);\r\n    \r\n            console.log(\"CHECK ID: \", topArtistsIds);\r\n              \r\n            // Construct the seeds for the recommendations API query\r\n            const extractIds = (data) => {\r\n                if (Array.isArray(data)) {\r\n                  return data.map(item => item.id);\r\n                } else {\r\n                  // Return an empty array or handle the case when data is not an array\r\n                  return [];\r\n                }\r\n              };\r\n              \r\n    \r\n            const extractedArtistIds = extractIds(topArtistsIds.items.slice(0, 4));\r\n            console.log(\"EXTRACTED ARTISTS: \", extractedArtistIds)\r\n            \r\n    \r\n            const seedArtists = `seed_artists=${extractedArtistIds.join(',')}`;\r\n         \r\n    \r\n            \r\n    \r\n            const recommendationsURL = `https://api.spotify.com/v1/recommendations?${seedArtists}`;\r\n    \r\n            console.log(recommendationsURL);\r\n    \r\n            setReccomended(await getUserSpotifyData(recommendationsURL));\r\n\r\n        } else {\r\n            setReccomended([])\r\n        }\r\n\r\n\r\n        setLoading(false); // Set loading to false when data is loaded\r\n\r\n    }\r\n    \r\n\r\n    return (\r\n        <div className=\"page-body\">\r\n            {loading ? (\r\n                <Loading />\r\n            ) : userResults.length === 0 ? (\r\n                <NotFound />\r\n            ) : (\r\n                <div>\r\n                    {/* Profile Header */}\r\n                    <ColorExtractor src={UserIcon} getColors={handleGetColors} />\r\n                    <div className=\"profile-head\" style={{ background: gradientString }}>\r\n                        {/* Left Column */}\r\n                        <div className=\"column-left\">\r\n                            <div className=\"artist-image-container\">\r\n                                <img src={UserIcon} className=\"artist-image profile-image mb-3\" />\r\n                            </div>\r\n                        </div>\r\n    \r\n                        {/* Right Column */}\r\n                        <div className=\"column-right\">\r\n                            <div className=\"profile-name\">\r\n                                <h1 className=\"profile-caption\">{userResults.username}</h1>\r\n                            </div>\r\n                            <div>\r\n                                <h1 className=\"caption type-caption\"> {userResults.accountname} </h1>\r\n                            </div>\r\n    \r\n                            <div className=\"genre-list\">\r\n                            <p className=\"artist-link\">\r\n                                User • {followersVal.followerIds ? followersVal.followerIds.length : 0} Followers • {followingVal && followingVal.followingList ? followingVal.followingList.length : 0} Following\r\n                            </p>\r\n\r\n                            </div>\r\n    \r\n                            {/* Conditionally render Spotify authorization button */}\r\n                            {userAuth === true && !token && (\r\n                                <button className = \"rate-button\" id=\"loginButton\" onClick={handleSpotifyLogin}>\r\n                                    Authorize Spotify\r\n                                </button>\r\n                            )}\r\n\r\n                            {userAuth === true && token && (\r\n                                <button className = \"rate-button\" id=\"loginButton\" onClick={handleSpotifyLogout}>\r\n                                    Delink Spotify\r\n                                </button>\r\n                            )}\r\n\r\n                            {userAuth !== true && (userSession._id) && (\r\n\r\n                               \r\n                                    <button className = \"rate-button\" id=\"loginButton\" onClick={handleFollow}>\r\n                                        {followState}\r\n                                    </button>\r\n\r\n                                 \r\n                            \r\n                                \r\n\r\n                                \r\n                            )}\r\n\r\n                            {token && (\r\n                                <Link to={spotifyUserPage.external_urls.spotify} >\r\n                                    <button className = \"rate-button\" id=\"loginButton\" >\r\n                                        Open on Spotify\r\n                                    </button>\r\n                                </Link>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n    \r\n                    {/* Profile Body */}\r\n                    <div className=\"profile-body\" style={{ background: bodyGradient }}>\r\n                        <div className=\"profile-body-expand\">\r\n                            {/* Tabs */}\r\n                            <div className=\"top-songs top-tabs pb-3 pt-3\">\r\n                                <h1\r\n                                    className={`top-tab caption profile-subcaption pb-3 ${\r\n                                        activeTab === 'Overview' ? 'active-profile' : ''\r\n                                    }`}\r\n                                    onClick={() => handleTabClick('Overview')}\r\n                                >\r\n                                    Overview\r\n                                </h1>\r\n                                <h1\r\n                                    className={`top-tab caption profile-subcaption pb-3 ${\r\n                                        activeTab === 'Following' ? 'active-profile' : ''\r\n                                    }`}\r\n                                    onClick={() => handleTabClick('Following')}\r\n                                >\r\n                                    Following\r\n                                </h1>\r\n\r\n                                <h1\r\n                                    className={`top-tab caption profile-subcaption pb-3 ${\r\n                                        activeTab === 'Followers' ? 'active-profile' : ''\r\n                                    }`}\r\n                                    onClick={() => handleTabClick('Followers')}\r\n                                >\r\n                                    Followers\r\n                                </h1>\r\n                                <h1\r\n                                    className={`top-tab caption profile-subcaption pb-3 ${\r\n                                        activeTab === 'Review' ? 'active-profile' : ''\r\n                                    }`}\r\n                                    onClick={() => handleTabClick('Review')}\r\n                                >\r\n                                    Reviews\r\n                                </h1>\r\n                                <h1\r\n                                    className={`top-tab caption profile-subcaption pb-3 ${\r\n                                        activeTab === 'Stats' ? 'active-profile' : ''\r\n                                    }`}\r\n                                    onClick={() => handleTabClick('Stats')}\r\n                                >\r\n                                    Stats\r\n                                </h1>\r\n\r\n                               \r\n                            </div>\r\n    \r\n                            {/* Tab Content */}\r\n                            {activeTab === 'Overview' && (\r\n                                // Content related to Overview tab\r\n                                <div className=\"content-overview\">\r\n\r\n\r\n\r\n                                    <div>\r\n                                        <h1 className=\"caption profile-altsubcaption pb-3 pt-3\">Milestones</h1>\r\n                                        <ul>\r\n                                            <li className = \"artist-link\">{followingVal.length >= 5 ? `Completed: ` : `Incomplete: `}Follow 5 or more users on this website</li>\r\n                                            <li  className = \"artist-link\">{followersVal.length >= 5 ? `Completed: ` : `Incomplete: `}Have 5 or more users follow you on this website</li>\r\n                                            <li className = \"artist-link\">{userReviews.length >= 5 ? `Completed: ` : `Incomplete: `}Review 5 or more albums</li>\r\n                                        </ul>\r\n                                    </div>\r\n\r\n                                    \r\n                                    \r\n                                        \r\n                                    {/* Listening Activity */}\r\n                                    {listenHistory && listenHistory.items && listenHistory.items.length > 0 && (\r\n                                        <div>\r\n                                            <h1 className=\"caption profile-altsubcaption pb-3 pt-3\">Listening activity</h1>\r\n                                            <PlaylistTracklist items={listenHistory.items} />\r\n                                        </div>\r\n                                    )}\r\n                                    {(!listenHistory || !listenHistory.items || listenHistory.items.length === 0) && (\r\n                                        <h1 className=\"caption profile-altsubcaption pb-3 pt-3\">No listening activity available</h1>\r\n                                    )}\r\n                                \r\n                                    {/* User Playlists */}\r\n                                    {topPlaylists && topPlaylists.items && topPlaylists.items.length > 0 && (\r\n                                        <div>\r\n                                            <h1 className=\"caption profile-altsubcaption pb-3 pt-3\">User playlists</h1>\r\n                                            <CustomCardResult items={topPlaylists.items} subtitleType={\"playlist\"} />\r\n                                        </div>\r\n                                    )}\r\n                                    {(!topPlaylists || !topPlaylists.items || topPlaylists.items.length === 0) && (\r\n                                        <h1 className=\"caption profile-altsubcaption pb-3 pt-3\">No user playlists available</h1>\r\n                                    )}\r\n\r\n                                    {/* User Playlists */}\r\n                                    {reccomended && reccomended.tracks && reccomended.tracks.length > 0 && (\r\n                                        <div>\r\n                                            <h1 className=\"caption profile-altsubcaption pb-3 pt-3\">User reccomended</h1>\r\n                                            <CustomTracklist items={reccomended.tracks}/>\r\n                                        </div>\r\n                                    )}\r\n                                    {(!reccomended || !reccomended.tracks || reccomended.tracks.length === 0) && (\r\n                                        <h1 className=\"caption profile-altsubcaption pb-3 pt-3\">No user recommendations available</h1>\r\n                                    )}\r\n\r\n                                    <div className = 'mb-3'>\r\n                                    </div>\r\n                                   \r\n                                </div>\r\n                            )}\r\n    \r\n                            {activeTab === 'Review' && (\r\n                                // Content related to Reviews tab\r\n                                <div className=\"content-overview\">\r\n                                    {userReviews.length === 0 ? (\r\n                                        <h1 className=\"caption profile-altsubcaption pb-3 pt-3\">No user reviews available.</h1>\r\n                                    ) : (\r\n                                        <><div>\r\n                                            <h1 className=\"caption profile-altsubcaption pb-3 pt-3\">User reviews</h1>\r\n                                        </div><UserReviewResults reviews={userReviews} /></>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n\r\n                            {activeTab === 'Following' && (\r\n                                // Content related to Reviews tab\r\n                                <div className=\"content-overview\">\r\n                                    {!followingVal.followingList ? (\r\n                                        <h1 className=\"caption profile-altsubcaption pb-3 pt-3\">No following stats available.</h1>\r\n                                    ) : (\r\n                                        <><div>\r\n                                            <h1 className=\"caption profile-altsubcaption pb-3 pt-3\">Following</h1>\r\n                                        </div><CustomCardResult items={followingResults} subtitleType={\"user\"} /></>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n\r\n\r\n                            {activeTab === 'Followers' && (\r\n                                // Content related to Reviews tab\r\n                                <div className=\"content-overview\">\r\n                                    {followersVal.length === 0 ? (\r\n                                        <h1 className=\"caption profile-altsubcaption pb-3 pt-3\">No followers available.</h1>\r\n                                    ) : (\r\n                                        <><div>\r\n                                            <h1 className=\"caption profile-altsubcaption pb-3 pt-3\">Followers</h1>\r\n                                        </div> <CustomCardResult items={followerResults} subtitleType={\"user\"}/>  </>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n\r\n\r\n                            \r\n    \r\n                            {activeTab === 'Stats' && (\r\n                            // Content related to Stats tab\r\n                            <div className=\"content-stats\">\r\n                                {/* Stat Tabs */}\r\n                                <div className=\"top-songs top-tabs pb-3 pt-3\">\r\n                                    <h1\r\n                                        className={`top-tab caption profile-subcaption pb-3 ${\r\n                                            activeStatTab === 'all-time' ? 'active-profile' : ''\r\n                                        }`}\r\n                                        onClick={() => handleStatClick('all-time')}\r\n                                    >\r\n                                        All time\r\n                                    </h1>\r\n                                    <h1\r\n                                        className={`top-tab caption profile-subcaption pb-3 ${\r\n                                            activeStatTab === 'past-month' ? 'active-profile' : ''\r\n                                        }`}\r\n                                        onClick={() => handleStatClick('past-month')}\r\n                                    >\r\n                                        Past month\r\n                                    </h1>\r\n                                </div>\r\n\r\n                                {/* Top Artists and Tracks */}\r\n                    \r\n                                {activeStatTab === 'all-time' && (\r\n                                    <div>\r\n                                        \r\n                                        {topArtistsTotal && topArtistsTotal.items.length > 0 ? (\r\n                                            <><h1 className=\"caption profile-altsubcaption pb-3 pt-3\">Top artists</h1>\r\n                                            <CustomCardResult items={topArtistsTotal.items} subtitleType={\"artist\"} /></>\r\n                                        ) : (\r\n                                            <h1 className=\"caption profile-altsubcaption pb-3 pt-3\">No data available for all-time top artists.</h1>\r\n                                        )}\r\n\r\n                                        <div>\r\n                                            \r\n                                            {topTracksTotal && topTracksTotal.items.length > 0 ? (\r\n                                                <><h1 className=\"caption profile-altsubcaption pb-3 pt-3\">Top tracks</h1>\r\n                                                <CustomTracklist items={topTracksTotal.items} subtitleType={\"song\"} /></>\r\n                                            ) : (\r\n                                                <h1 className=\"caption profile-altsubcaption pb-3 pt-3\">No data available for all-time top tracks.</h1>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {activeStatTab === 'past-month' && (\r\n                                    <div>\r\n                                        \r\n                                        {topArtistsMonth && topArtistsMonth.items.length > 0 ? (\r\n                                            <><h1 className=\"caption profile-altsubcaption pb-3 pt-3\">Top artists</h1>\r\n                                            <CustomCardResult items={topArtistsMonth.items} subtitleType={\"artist\"} /></>\r\n                                        ) : (\r\n                                            <h1 className=\"caption profile-altsubcaption pb-3 pt-3\">No data available for past-month top artists.</h1>\r\n                                        )}\r\n\r\n                                        <div>\r\n                                            \r\n                                            {topTracksMonth && topTracksMonth.items.length > 0 ? (\r\n                                                <><h1 className=\"caption profile-altsubcaption pb-3 pt-3\">Top tracks</h1>\r\n                                                <CustomTracklist items={topTracksMonth.items} subtitleType={\"song\"} /></>\r\n                                                \r\n                                            ) : (\r\n                                                <h1 className=\"caption profile-altsubcaption pb-3 pt-3\">No data available for past-month top tracks.</h1>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                            </div>\r\n                        )}\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n    \r\n}\r\n\r\nexport default UserPage;\r\n\r\n\r\n\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}