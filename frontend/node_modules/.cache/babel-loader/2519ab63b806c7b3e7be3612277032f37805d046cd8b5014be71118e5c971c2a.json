{"ast":null,"code":"// Import components, modules, and styles\nimport React,{useEffect,useState}from'react';import{useNavigate,Link}from\"react-router-dom\";import axios from\"axios\";import'./login-signup.css';import IconLogo from'../Assets/Icons/IconLogo.png';import PasswordHide from'../Assets/Icons/PasswordHide.png';import PasswordShown from'../Assets/Icons/PasswordShown.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){// Declare state variables\nconst history=useNavigate();const[useroremail,setUserOrEmail]=useState('');const[password,setPassword]=useState('');const[showPassword,setShowPassword]=useState(false);const[userData,setUserData]=useState(null);// Function for hiding or showing password in input field\nconst togglePasswordVisibility=()=>{setShowPassword(!showPassword);};useEffect(()=>{// Make an API call to fetch user data from the backend\n// This is for redirecting the user back to home page if they are logged in already\naxios.get(\"http://localhost:3000/session\").then(response=>{// Handle successful response\nsetUserData(response.data);if(response.data){history(\"/\");}}).catch(error=>{// Handle error\nconsole.error(\"Error fetching user data:\",error);});},[]);// Function for handling submission of login form\n// If user does exist and password is correct, we will save the session\n// And go back to home page, if not we alert the user of any errors\nasync function submit(e){e.preventDefault();try{await axios.post(\"http://localhost:3000/login\",{useroremail,password}).then(res=>{if(res.data===\"exist\"){history(\"/\",{state:{id:useroremail}});window.location.reload();}else{alert(res.data);}}).catch(e=>{alert(\"Wrong details\");console.log(e);});}catch(e){console.log(e);}}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"logo\",children:[/*#__PURE__*/_jsx(\"img\",{src:IconLogo,width:\"100\",height:\"100\",alt:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"logotext\",children:\"Senior Project  \"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"caption\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:\"Log in\"})})]}),/*#__PURE__*/_jsxs(\"form\",{action:\"POST\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"useroremail\",children:\"Account Name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-text\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"useroremail\",onChange:e=>{setUserOrEmail(e.target.value);},placeholder:\"Account Name\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-text\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?'text':'password',id:\"password\",onChange:e=>{setPassword(e.target.value);},placeholder:\"Enter a password\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"password-button\",onClick:togglePasswordVisibility,children:/*#__PURE__*/_jsx(\"img\",{src:showPassword?PasswordShown:PasswordHide})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"submit-container\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:submit,className:\"submit\",children:\"Log In\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"have-account\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Sign up \"})]})})]});}export default Login;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Link","axios","IconLogo","PasswordHide","PasswordShown","jsx","_jsx","jsxs","_jsxs","Login","history","useroremail","setUserOrEmail","password","setPassword","showPassword","setShowPassword","userData","setUserData","togglePasswordVisibility","get","then","response","data","catch","error","console","submit","e","preventDefault","post","res","state","id","window","location","reload","alert","log","className","children","src","width","height","alt","action","htmlFor","type","onChange","target","value","placeholder","required","onClick","to"],"sources":["C:/Users/luker/SeniorProject/senior-music-project/frontend/src/Components/general/login.jsx"],"sourcesContent":["// Import components, modules, and styles\r\nimport React, {useEffect, useState} from 'react'\r\nimport {useNavigate, Link} from \"react-router-dom\"\r\nimport axios from \"axios\"\r\nimport './login-signup.css'\r\nimport IconLogo from '../Assets/Icons/IconLogo.png'\r\nimport PasswordHide from '../Assets/Icons/PasswordHide.png'\r\nimport PasswordShown from '../Assets/Icons/PasswordShown.png'\r\n\r\n\r\n\r\nfunction Login() {\r\n    // Declare state variables\r\n    const history=useNavigate();\r\n    const [useroremail, setUserOrEmail]=useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [userData, setUserData] = useState(null);\r\n\r\n    // Function for hiding or showing password in input field\r\n    const togglePasswordVisibility = () => {\r\n        setShowPassword(!showPassword);\r\n        \r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        // Make an API call to fetch user data from the backend\r\n        // This is for redirecting the user back to home page if they are logged in already\r\n        axios.get(\"http://localhost:3000/session\")\r\n          .then(response => {\r\n            // Handle successful response\r\n            setUserData(response.data); \r\n            if (response.data) {\r\n                history(\"/\");\r\n            }\r\n          })\r\n          .catch(error => {\r\n            // Handle error\r\n            console.error(\"Error fetching user data:\", error);\r\n        });\r\n        \r\n\r\n    }, []);\r\n\r\n    // Function for handling submission of login form\r\n    // If user does exist and password is correct, we will save the session\r\n    // And go back to home page, if not we alert the user of any errors\r\n    async function submit(e){\r\n        e.preventDefault()\r\n\r\n        try {\r\n\r\n            await axios.post(\"http://localhost:3000/login\", {\r\n                useroremail, password\r\n            })\r\n            .then(res=>{\r\n                if(res.data===\"exist\"){\r\n                    history(\"/\", {state:{id:useroremail}})\r\n                    window.location.reload();\r\n                } else {\r\n                    alert(res.data);\r\n                }\r\n            })\r\n            .catch(e=> {\r\n                alert(\"Wrong details\")\r\n                console.log(e);\r\n            })\r\n            \r\n\r\n        } catch(e) {\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div className = 'container'>        \r\n            <div className = 'header'>\r\n                <div className = 'logo'>\r\n                    <img src={IconLogo} width = \"100\" height = \"100\"  alt=\"\"/>\r\n                    <div className = 'logotext'>Senior Project  </div>\r\n                </div>\r\n                <div className = 'caption'>\r\n                        <div className = 'text'>Log in</div>\r\n                     \r\n                </div>\r\n            </div>\r\n            \r\n\r\n            <form action=\"POST\">\r\n                <div className=\"inputs\">\r\n                <div className=\"input\">\r\n                    <label htmlFor=\"useroremail\">Account Name</label>\r\n                    <div className = \"input-text\">\r\n                        \r\n                        <input type=\"text\" id = \"useroremail\" onChange = {(e)=>{setUserOrEmail(e.target.value)}} placeholder = \"Account Name\" />\r\n                        \r\n                    </div>\r\n                   \r\n                </div>\r\n                <div className=\"input\">\r\n                    <label htmlFor=\"password\">Password</label>\r\n                    <div className = \"input-text\">\r\n                        <input\r\n                        type={showPassword ? 'text' : 'password'}\r\n                        id=\"password\"\r\n                        onChange={(e) => {\r\n                            setPassword(e.target.value);\r\n                        }}\r\n                        placeholder=\"Enter a password\"\r\n                        required\r\n                        />\r\n                        <button type = \"button\" \r\n                        className=\"password-button\"\r\n                        onClick={togglePasswordVisibility}>\r\n                            <img src={showPassword ? PasswordShown : PasswordHide}/>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                \r\n                </div>\r\n\r\n                \r\n                <div className = \"submit-container\" >\r\n                        <button type = \"submit\" onClick={submit} className = \"submit\">Log In</button>\r\n                </div>\r\n            </form>\r\n            <div className = \"have-account\">\r\n                <p> \r\n                    Don't have an account? <Link to={\"/signup\"}>Sign up </Link>\r\n                </p>\r\n                \r\n                \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}