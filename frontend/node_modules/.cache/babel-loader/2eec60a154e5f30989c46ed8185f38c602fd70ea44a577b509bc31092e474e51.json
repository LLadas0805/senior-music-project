{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useLocation}from\"react-router-dom\";import'bootstrap/dist/css/bootstrap.min.css';import CustomCardResult from\"./CustomCardResult.jsx\";import Loading from\"./loading.jsx\";import'./home.css';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CLIENT_ID=\"5d8c84c59ac8435e91aa1c9d5d2e9706\";const CLIENT_SECRET=\"93799cce40b641bb951a9b6966e3f2c0\";function Home(){const[userData,setUserData]=useState(null);const[accessToken,setAccessToken]=useState(\"\");const[newReleaseResults,setNewReleaseResults]=useState({});const[loading,setLoading]=useState(true);const spotifyEndpoints='https://api.spotify.com/v1/browse/new-releases?offset=0';useEffect(()=>{// Make an API call to fetch user data from the backend\naxios.get(\"http://localhost:3000/session\").then(response=>{// Handle successful response\nsetUserData(response.data);// Assuming the response contains user data\n}).catch(error=>{// Handle error\nconsole.error(\"Error fetching user data:\",error);});async function fetchData(){// Fetch access token once during component initialization\nconst token=await fetchAccessToken();setAccessToken(token);// Fetch album data\nconst newReleases=await performSearch(token,spotifyEndpoints);setNewReleaseResults(newReleases);setLoading(false);// Set loading to false when data is loaded\n}fetchData();},[]);async function fetchAccessToken(){const authParameters={method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:'grant_type=client_credentials&client_id='+CLIENT_ID+'&client_secret='+CLIENT_SECRET};const data=await fetch('https://accounts.spotify.com/api/token',authParameters).then(result=>result.json());return data.access_token;}async function performSearch(token){let spotifyEndpoint=arguments.length>1&&arguments[1]!==undefined?arguments[1]:spotifyEndpoints;const searchParameters={method:'GET',headers:{'Content-Type':'application/json','Authorization':'Bearer '+token}};try{const response=await fetch(spotifyEndpoint,searchParameters);if(response.ok){return await response.json();}console.log(response);}catch(error){console.error('Error searching:',error);}return{};}return/*#__PURE__*/_jsx(\"div\",{className:\"homepage\",style:{color:'white'},children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"caption-div\",children:/*#__PURE__*/_jsx(Loading,{})}):/*#__PURE__*/_jsxs(\"div\",{className:\"search-results\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"caption-div\",children:userData?/*#__PURE__*/_jsxs(\"p\",{className:\"caption type-caption\",children:[\"Welcome \",userData.username]}):/*#__PURE__*/_jsx(\"p\",{className:\"caption type-caption\",children:\"Hello, welcome to Harmony!\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"caption-div\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"caption\",children:\"New releases\"}),/*#__PURE__*/_jsx(CustomCardResult,{items:newReleaseResults.albums.items.slice(0,6),subtitleType:\"album\",singleRow:true})]})]})});}export default Home;","map":{"version":3,"names":["React","useState","useEffect","useLocation","CustomCardResult","Loading","axios","jsx","_jsx","jsxs","_jsxs","CLIENT_ID","CLIENT_SECRET","Home","userData","setUserData","accessToken","setAccessToken","newReleaseResults","setNewReleaseResults","loading","setLoading","spotifyEndpoints","get","then","response","data","catch","error","console","fetchData","token","fetchAccessToken","newReleases","performSearch","authParameters","method","headers","body","fetch","result","json","access_token","spotifyEndpoint","arguments","length","undefined","searchParameters","ok","log","className","style","color","children","username","items","albums","slice","subtitleType","singleRow"],"sources":["C:/Users/luker/SeniorProject/senior-music-project/frontend/src/Components/home-page/home.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport CustomCardResult from \"./CustomCardResult.jsx\";\r\nimport Loading from \"./loading.jsx\"\r\nimport './home.css'\r\nimport axios from \"axios\"\r\n\r\n\r\nconst CLIENT_ID = \"5d8c84c59ac8435e91aa1c9d5d2e9706\";\r\nconst CLIENT_SECRET = \"93799cce40b641bb951a9b6966e3f2c0\";\r\n\r\nfunction Home() {\r\n    const [userData, setUserData] = useState(null);\r\n    const [accessToken, setAccessToken] = useState(\"\");\r\n    const [newReleaseResults, setNewReleaseResults] = useState({});\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    \r\n    const spotifyEndpoints = 'https://api.spotify.com/v1/browse/new-releases?offset=0';\r\n\r\n\r\n    useEffect(() => {\r\n        // Make an API call to fetch user data from the backend\r\n        axios.get(\"http://localhost:3000/session\")\r\n          .then(response => {\r\n            // Handle successful response\r\n            setUserData(response.data); // Assuming the response contains user data\r\n          })\r\n          .catch(error => {\r\n            // Handle error\r\n            console.error(\"Error fetching user data:\", error);\r\n        });\r\n\r\n        async function fetchData() {\r\n            // Fetch access token once during component initialization\r\n            const token = await fetchAccessToken();\r\n            setAccessToken(token);\r\n           \r\n            // Fetch album data\r\n\r\n            const newReleases = await performSearch(token, spotifyEndpoints);\r\n            setNewReleaseResults(newReleases);\r\n            \r\n\r\n            \r\n            \r\n\r\n\r\n\r\n    \r\n\r\n            setLoading(false); // Set loading to false when data is loaded\r\n        }\r\n\r\n        fetchData();\r\n\r\n\r\n    }, []);\r\n\r\n\r\n\r\n    async function fetchAccessToken() {\r\n        const authParameters = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/x-www-form-urlencoded'\r\n            },\r\n            body: 'grant_type=client_credentials&client_id=' + CLIENT_ID + '&client_secret=' + CLIENT_SECRET\r\n        }\r\n        const data = await fetch('https://accounts.spotify.com/api/token', authParameters)\r\n            .then(result => result.json());\r\n        return data.access_token;\r\n    }\r\n\r\n    async function performSearch(token, spotifyEndpoint = spotifyEndpoints) {\r\n        const searchParameters = {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': 'Bearer ' + token\r\n            }\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(spotifyEndpoint, searchParameters);\r\n            if (response.ok) {\r\n                return await response.json();\r\n                \r\n            }\r\n            console.log(response)\r\n        } catch (error) {\r\n            console.error('Error searching:', error);\r\n        }\r\n\r\n        return {};\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"homepage\" style={{ color: 'white' }}>\r\n            {loading ? (\r\n                <div className=\"caption-div\">\r\n                    <Loading/>\r\n                </div>\r\n            ) : (\r\n            <div className=\"search-results\">\r\n\r\n                <div className=\"caption-div\">\r\n                {userData ? (\r\n                    <p className=\"caption type-caption\">Welcome {userData.username}</p>\r\n                    ) : (\r\n                    <p className=\"caption type-caption\">Hello, welcome to Harmony!</p>\r\n                )}\r\n                </div>\r\n\r\n                <div className=\"caption-div\">\r\n                    <p className=\"caption\">New releases</p>\r\n                    <CustomCardResult items={newReleaseResults.albums.items.slice(0, 6)} subtitleType=\"album\" singleRow = {true}/>\r\n\r\n                </div>\r\n\r\n            </div>\r\n            )}\r\n     \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}