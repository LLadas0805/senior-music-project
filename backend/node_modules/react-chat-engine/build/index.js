!function(e,t){if("object"===typeof exports&&"object"===typeof module)module.exports=t(require("react"));else if("function"===typeof define&&define.amd)define(["react"],t);else{var n="object"===typeof exports?t(require("react")):t(e.react);for(var o in n)("object"===typeof exports?exports:e)[o]=n[o]}}(this,(function(e){return function(e){function t(t){for(var o,a,s=t[0],u=t[1],i=t[2],f=0,h=[];f<s.length;f++)a=s[f],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&h.push(r[a][0]),r[a]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);for(l&&l(t);h.length;)h.shift()();return c.push.apply(c,i||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],o=!0,s=1;s<n.length;s++){var u=n[s];0!==r[u]&&(o=!1)}o&&(c.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={0:0},c=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=this["webpackJsonpreact-chat-engine"]=this["webpackJsonpreact-chat-engine"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var i=0;i<s.length;i++)t(s[i]);var l=u;return c.push([17,1]),n()}({17:function(e,t,n){e.exports=n(35)},2:function(t,n){t.exports=e},35:function(e,t,n){"use strict";n.r(t);var o=n(2),r=n.n(o),c=n(11),a=n(12),s=n(15),u=n(13),i=n(16),l=n(14);function f(e){var t=e.publicKey,n=e.userName,o=e.userSecret,r=new l.a("".concat("wss://").concat("api.chatengine.io","/person/?publicKey=").concat(t,"&username=").concat(n,"&secret=").concat(o));return r.onopen=function(t){console.log("User socket connect",t),e.onConnect&&e.onConnect(e)},r.onerror=function(e){console.log("User socket error",e)},r.onmessage=function(t){var n=JSON.parse(t.data);console.log("action",n.action),"new_chat"===n.action?e.onNewChat&&e.onNewChat(n.data):"edit_chat"===n.action?e.onEditChat&&e.onEditChat(n.data):"delete_chat"===n.action?e.onDeleteChat&&e.onDeleteChat(n.data):"add_person"===n.action?e.onAddPerson&&e.onAddPerson(n.data):"remove_person"===n.action?e.onRemovePerson&&e.onRemovePerson(n.data):"new_message"===n.action?e.onNewMessage&&e.onNewMessage(n.data.id,n.data.messages):"edit_message"===n.action?e.onEditMessage&&e.onEditMessage(n.data.id,n.data.messages):"delete_message"===n.action&&e.onDeleteMessage&&e.onDeleteMessage(n.data.id,n.data.messages)},r}var h=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={rws:null},n}return Object(i.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){this.props.publicKey?this.setState({rws:f(this.props)}):console.log("You need an API key. Register for one here: https://www.chatengine.io/register")}},{key:"componentWillUnmount",value:function(){this.state.rws.close()}},{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(o.Component),d=function(e){return r.a.createElement("div",null,r.a.createElement(h,e))},p=n(0),g=n.n(p);var m="http://127.0.0.1:8000";function y(e){g.a.get("".concat(m,"/chats/"),{headers:{"Public-Key":e.publicKey,"User-Name":e.userName,"User-Secret":e.userSecret}}).then((function(t){200===t.status&&e.onGetChats&&e.onGetChats(t.data)})).catch((function(e){console.log("Fetch Chats Error",e)}))}function b(e,t){g.a.post("".concat(m,"/chats/"),t,{headers:{"Public-Key":e.publicKey,"User-Name":e.userName,"User-Secret":e.userSecret}}).then((function(e){})).catch((function(e){console.log("New Chat Error",e)}))}function v(e,t,n){g.a.patch("".concat(m,"/chats/").concat(t,"/"),n,{headers:{"Public-Key":e.publicKey,"User-Name":e.userName,"User-Secret":e.userSecret}}).then((function(e){})).catch((function(e){console.log("Edit Chat Error",e)}))}function S(e,t){g.a.delete("".concat(m,"/chats/").concat(t,"/"),{headers:{"Public-Key":e.publicKey,"User-Name":e.userName,"User-Secret":e.userSecret}}).then((function(e){})).catch((function(e){console.log("Delete Chat Error",e)}))}function N(e,t,n){g.a.post("".concat(m,"/chats/").concat(t,"/people/"),{username:n},{headers:{"Public-Key":e.publicKey,"User-Name":e.userName,"User-Secret":e.userSecret}}).then((function(e){})).catch((function(e){console.log("New Person Error",e)}))}function P(e,t,n){g.a.patch("".concat(m,"/chats/").concat(t,"/people/"),{username:n},{headers:{"Public-Key":e.publicKey,"User-Name":e.userName,"User-Secret":e.userSecret}}).then((function(e){})).catch((function(e){console.log("Delete Person Error",e)}))}function w(e,t){g.a.get("".concat(m,"/chats/").concat(t,"/messages/"),{headers:{"Public-Key":e.publicKey,"User-Name":e.userName,"User-Secret":e.userSecret}}).then((function(n){200===n.status&&e.onGetMessages&&e.onGetMessages(t,n.data)})).catch((function(e){console.log("Fetch Messages Error",e)}))}function K(e,t,n){g.a.post("".concat(m,"/chats/").concat(t,"/messages/"),n,{headers:{"Public-Key":e.publicKey,"User-Name":e.userName,"User-Secret":e.userSecret}}).then((function(e){})).catch((function(e){console.log("Send Messages Error",e)}))}function U(e,t,n,o){g.a.patch("".concat(m,"/chats/").concat(t,"/messages/").concat(n,"/"),o,{headers:{"Public-Key":e.publicKey,"User-Name":e.userName,"User-Secret":e.userSecret}}).then((function(e){})).catch((function(e){console.log("Delete Messages Error",e)}))}function M(e,t,n){g.a.delete("".concat(m,"/chats/").concat(t,"/messages/").concat(n,"/"),{headers:{"Public-Key":e.publicKey,"User-Name":e.userName,"User-Secret":e.userSecret}}).then((function(e){})).catch((function(e){console.log("Delete Messages Error",e)}))}n.d(t,"ChatEngine",(function(){return d})),n.d(t,"getChats",(function(){return y})),n.d(t,"newChat",(function(){return b})),n.d(t,"editChat",(function(){return v})),n.d(t,"deleteChat",(function(){return S})),n.d(t,"addPerson",(function(){return N})),n.d(t,"removePerson",(function(){return P})),n.d(t,"getMessages",(function(){return w})),n.d(t,"sendMessage",(function(){return K})),n.d(t,"editMessage",(function(){return U})),n.d(t,"deleteMessage",(function(){return M}))}})}));
//# sourceMappingURL=index.js.map